{% load static %}

<script type="text/javascript">

{{ bargraphjs|safe }}

// For slider TODO sync with tabular-by-round-interactive.html
var numRounds = {{ tabularByRoundInteractive.rounds|length }};
var viewboxWidth = numRounds * 50 + 120;

var numCandidates = candidateVoteCounts.length;
fixMaxWidthFor('bargraph-interactive-body', numCandidates);
// window.onresize = fixMaxWidth; TODO fix moving across monitors for interactive and static

var interactive = true;
transitionEachBarForRound = makeBarGraph(
  "#bargraph-interactive-body" /* idOfContainer */,
  "#bargraph-interactive-round-description" /* idOfLegendOrRoundDescriber */,
  candidateVoteCounts,
  humanFriendlyRoundNames,
  humanFriendlyRoundDescriptions,
  totalVotesPerRound,
  numRoundsTilWin,
  colors,
  longestLabelApxWidth,
  interactive,
  threshold,
  config.doHideOverflowAndEliminated,
  !config.doUseHorizontalBarGraph,
  config.doDimPrevRoundColors);


var timelineData = humanFriendlyRoundNames.map(function(name) {
  return [{
    summaryText: name,
    className: name.includes('eliminated') ? 'timeline-info-bad' : 'timeline-info-good',
    moreInfoText: name.includes('eliminated') ?
      'The candidate had the fewest votes, so everybody who voted for this candidate now moves on to their next choice.' :
      'The candidate reached the threshold and won'
  }]
})

trs_createSliderAndTimeline({
  wrapperDivId: 'bargraph-slider-container',
  numTicks: numRounds,
  widtH: viewboxWidth,
  color: colors,
  sliderValueChanged: transitionEachBarForRound,
  timelineData: timelineData
});
</script>
